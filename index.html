<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>A Premium Valentine's Surprise</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=Montserrat:wght@200;400;600&family=Dancing+Script:wght@600&display=swap" rel="stylesheet">
    <style>
        :root {
            --velvet: #4a0404;
            --gold: #d4af37;
            --cream: #fffaf0;
        }

        body {
            margin: 0;
            overflow: hidden;
            background-color: #0d0202;
            font-family: 'Montserrat', sans-serif;
            color: white;
            user-select: none;
        }

        #canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
            background: radial-gradient(circle at center, #2c0000 0%, #0d0202 100%);
        }

        .glass-card {
            background: rgba(20, 5, 5, 0.6);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(212, 175, 55, 0.2);
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.5);
        }

        /* Entry Overlay */
        #entry-overlay {
            position: fixed;
            inset: 0;
            z-index: 100;
            background: #0d0202;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            transition: opacity 1.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .gold-ring {
            width: 120px;
            height: 120px;
            border: 1px solid var(--gold);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.5s ease;
            position: relative;
        }

        .gold-ring:hover {
            box-shadow: 0 0 30px var(--gold);
            transform: scale(1.05);
        }

        .gold-ring::before {
            content: '';
            position: absolute;
            inset: -5px;
            border: 1px solid var(--gold);
            border-radius: 50%;
            opacity: 0.3;
            animation: ping 2s cubic-bezier(0, 0, 0.2, 1) infinite;
        }

        @keyframes ping {
            75%, 100% { transform: scale(1.5); opacity: 0; }
        }

        /* Premium Envelope */
        .envelope-container {
            perspective: 1000px;
            z-index: 10;
        }

        .envelope-wrapper {
            position: relative;
            width: 340px;
            height: 220px;
            background-color: #800000;
            cursor: pointer;
            transition: transform 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            transform-style: preserve-3d;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }

        .envelope-wrapper.open {
            transform: translateY(120px) rotateX(10deg);
        }

        .envelope-top {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: #800000;
            z-index: 3;
            clip-path: polygon(0 0, 50% 50%, 100% 0);
            transition: transform 0.6s 0.2s;
            transform-origin: top;
            border-top: 1px solid rgba(255,255,255,0.1);
        }

        .envelope-wrapper.open .envelope-top {
            transform: rotateX(180deg);
            z-index: 0;
        }

        .wax-seal {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 60px;
            height: 60px;
            background: #b22222;
            border-radius: 50%;
            z-index: 4;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 10px rgba(0,0,0,0.3), inset 0 0 10px rgba(0,0,0,0.2);
            border: 2px solid #8b0000;
            transition: opacity 0.4s;
        }

        .wax-seal span {
            color: var(--gold);
            font-family: 'Playfair Display';
            font-size: 24px;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
        }

        .envelope-wrapper.open .wax-seal {
            opacity: 0;
            pointer-events: none;
        }

        .letter {
            position: absolute;
            bottom: 5px;
            left: 5%;
            width: 90%;
            height: 90%;
            background: var(--cream);
            background-image: linear-gradient(rgba(0,0,0,0.05) 1px, transparent 1px);
            background-size: 100% 1.5em;
            transition: all 0.8s 0.3s;
            padding: 30px 20px;
            color: #2c0000;
            border-radius: 2px;
            z-index: 1;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }

        .envelope-wrapper.open .letter {
            transform: translateY(-160px) scale(1.1);
            height: 380px;
            z-index: 5;
            box-shadow: 0 20px 40px rgba(0,0,0,0.4);
        }

        .hidden-content {
            opacity: 0;
            transition: opacity 2s ease;
        }

        .show {
            opacity: 1 !important;
        }

        .typewriter-text {
            font-family: 'Dancing Script', cursive;
            font-size: 1.4rem;
            line-height: 1.6;
            min-height: 100px;
        }
    </style>
</head>
<body>

    <canvas id="canvas"></canvas>

    <!-- Entry Screen -->
    <div id="entry-overlay">
        <div class="gold-ring" onclick="startSurprise()">
            <span class="text-3xl">‚ù§Ô∏è</span>
        </div>
        <p class="mt-12 text-gold font-light tracking-[0.5em] uppercase text-sm animate-pulse">Enter My Heart</p>
    </div>

    <!-- Main Content -->
    <main class="relative z-10 min-h-screen flex flex-col items-center justify-center p-6 hidden-content" id="main-content">
        
        <div class="text-center mb-16">
            <h1 class="text-6xl md:text-8xl font-['Playfair_Display'] mb-4 italic text-white drop-shadow-2xl">Happy Valentine's</h1>
            <div class="h-[1px] w-24 bg-gold mx-auto mb-4"></div>
            <p class="text-lg font-light text-[#d4af37] tracking-[0.4em] uppercase">Forever & Always</p>
        </div>

        <div class="envelope-container">
            <div class="envelope-wrapper" id="envelope" onclick="toggleLetter()">
                <div class="envelope-top"></div>
                <div class="wax-seal">
                    <span>V</span>
                </div>
                <div class="letter">
                    <div id="letter-content" class="typewriter-text"></div>
                    <div class="mt-6 text-right font-['Dancing_Script'] text-2xl opacity-0 transition-opacity duration-1000" id="letter-sign">
                        With all my love,<br>
                        <span class="text-red-800 text-3xl">SUMAN</span>
                    </div>
                </div>
                <div class="absolute inset-0 bg-[#900] z-[2]"></div>
            </div>
        </div>

        <!-- Premium Details Footer -->
        <div class="mt-48 max-w-lg w-full glass-card p-10 text-center rounded-sm border-t-2 border-gold/30">
            <p class="text-gold italic font-['Playfair_Display'] text-xl mb-4">"In all the world, there is no heart for me like yours."</p>
            <div class="text-[10px] uppercase tracking-[0.3em] text-white/40">Maya Angelou</div>
        </div>

        <button onclick="toggleAudio()" class="fixed bottom-8 left-8 bg-black/40 hover:bg-black/60 p-4 rounded-full border border-gold/30 transition-all z-50">
            <span id="audio-icon" class="text-gold">üîä</span>
        </button>
    </main>

    <audio id="bg-music" loop>
        <source src="music.mp3" type="audio/mpeg">
    </audio>

    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        const audio = document.getElementById('bg-music');
        let particles = [];
        let isLetterOpen = false;

        const letterText = "To My Dearest,\n\nYou are the most beautiful part of my day and the best part of my life. Every smile you share and every moment we spend together is a treasure I hold close to my heart. Thank you for being you.\n\nHappy Valentine's Day!";

        function resize() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }
        window.addEventListener('resize', resize);
        resize();

        class Particle {
            constructor() {
                this.reset();
            }

            reset() {
                this.x = Math.random() * canvas.width;
                this.y = -20;
                this.size = Math.random() * 8 + 4;
                this.speedX = Math.random() * 2 - 1;
                this.speedY = Math.random() * 1.5 + 0.5;
                this.rotation = Math.random() * 360;
                this.rotationSpeed = Math.random() * 2 - 1;
                this.type = Math.random() > 0.3 ? 'petal' : 'gold'; // Petal or Gold dust
                this.opacity = Math.random() * 0.5 + 0.3;
            }

            draw() {
                ctx.save();
                ctx.translate(this.x, this.y);
                ctx.rotate(this.rotation * Math.PI / 180);
                ctx.globalAlpha = this.opacity;

                if (this.type === 'petal') {
                    ctx.fillStyle = '#ff4d6d';
                    ctx.beginPath();
                    ctx.moveTo(0, 0);
                    ctx.bezierCurveTo(-this.size, this.size, this.size, this.size * 1.5, 0, this.size * 2);
                    ctx.bezierCurveTo(-this.size, this.size * 1.5, -this.size, this.size, 0, 0);
                    ctx.fill();
                } else {
                    ctx.fillStyle = '#d4af37';
                    ctx.beginPath();
                    ctx.arc(0, 0, this.size/4, 0, Math.PI * 2);
                    ctx.fill();
                    // Sparkle
                    if (Math.random() > 0.95) ctx.shadowBlur = 10;
                    ctx.shadowColor = '#d4af37';
                }

                ctx.restore();

                this.y += this.speedY;
                this.x += this.speedX + Math.sin(this.y / 50);
                this.rotation += this.rotationSpeed;

                if (this.y > canvas.height + 20) this.reset();
            }
        }

        function init() {
            for(let i = 0; i < 80; i++) particles.push(new Particle());
            animate();
        }

        function animate() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            particles.forEach(p => p.draw());
            requestAnimationFrame(animate);
        }

        function startSurprise() {
            document.getElementById('entry-overlay').style.opacity = '0';
            setTimeout(() => {
                document.getElementById('entry-overlay').style.display = 'none';
                document.getElementById('main-content').classList.add('show');
            }, 1500);

            audio.play().catch(() => {});
            init();
        }

        function typeWriter(text, i, fnCallback) {
            if (i < text.length) {
                document.getElementById("letter-content").innerHTML = text.substring(0, i + 1) + '<span aria-hidden="true">|</span>';
                setTimeout(() => typeWriter(text, i + 1, fnCallback), 40);
            } else if (typeof fnCallback == 'function') {
                setTimeout(fnCallback, 700);
            }
        }

        function toggleLetter() {
            const wrapper = document.getElementById('envelope');
            if (isLetterOpen) return;
            
            isLetterOpen = true;
            wrapper.classList.add('open');
            
            // Start typewriter after envelope finishes opening
            setTimeout(() => {
                typeWriter(letterText, 0, () => {
                    document.getElementById('letter-sign').classList.remove('opacity-0');
                    document.getElementById('letter-sign').classList.add('opacity-100');
                    createBurst();
                });
            }, 1000);
        }

        function createBurst() {
            for(let i = 0; i < 30; i++) {
                const p = new Particle();
                p.y = window.innerHeight / 2;
                p.x = window.innerWidth / 2;
                p.speedY = Math.random() * 10 - 5;
                p.speedX = Math.random() * 10 - 5;
                particles.push(p);
                setTimeout(() => {
                    const idx = particles.indexOf(p);
                    if(idx > -1) particles.splice(idx, 1);
                }, 2000);
            }
        }

        function toggleAudio() {
            if (audio.paused) {
                audio.play();
                document.getElementById('audio-icon').innerText = 'üîä';
            } else {
                audio.pause();
                document.getElementById('audio-icon').innerText = 'üîá';
            }
        }
    </script>
</body>
</html>
